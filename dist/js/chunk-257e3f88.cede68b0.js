(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-257e3f88"],{2649:function(t,e,a){"use strict";var n=a("69c2"),r=a.n(n);r.a},3381:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"power"},[n("header",{staticClass:"page-header"},[t._v("权限管理")]),n("div",{staticClass:"split-box split-box-thin"}),n("div",{staticClass:"action-bar clear-fix"},[n("div",{staticClass:"bar-left"},[n("p",{staticClass:"search-inp"},[n("a-input-search",{attrs:{placeholder:"角色名称"},on:{input:function(e){return t.getData(1)}},model:{value:t.searchWord,callback:function(e){t.searchWord=e},expression:"searchWord"}})],1),n("a-button",{staticClass:"search-btn",attrs:{type:"primary"},on:{click:function(e){return t.getData(1)}}},[t._v("搜索")])],1),n("div",{staticClass:"bar-right"},[n("a-button",{on:{click:function(e){return t.openModal("add")}}},[t._v("添加角色")]),n("a-button",{attrs:{type:"primary"},on:{click:t.delData}},[t._v("批量删除")]),n("a-button",{on:{click:function(e){return t.$router.go(0)}}},[n("a-icon",{attrs:{type:"reload"}}),t._v(" 刷新 ")],1)],1)]),n("div",{staticClass:"power-table"},[t.data.length>0?n("div",{staticClass:"table-content"},[n("a-table",{attrs:{"data-source":t.data,pagination:t.pagination,loading:t.loading,"row-selection":t.rowSelection,rowKey:"id"},on:{change:t.handleTableChange}},[n("a-table-column",{key:"name",attrs:{title:"角色","data-index":"name"}}),n("a-table-column",{key:"remarks",attrs:{title:"描述","data-index":"remarks",ellipsis:!0},scopedSlots:t._u([{key:"default",fn:function(e){return[n("a-tooltip",{attrs:{placement:"left",title:e}},[n("span",[t._v(t._s(e||"--"))])])]}}],null,!1,888182575)}),n("a-table-column",{key:"state",attrs:{title:"状态","data-index":"state"},scopedSlots:t._u([{key:"default",fn:function(e,a){return[n("span",[n("a-switch",{attrs:{checked:0===e,disabled:1===a.id||2===a.id||3===a.id||4===a.id},on:{change:function(e){return t.changeRoleState(a)}}})],1)]}}],null,!1,1258203327)}),n("a-table-column",{key:"sort",attrs:{title:"排序","data-index":"sort"}}),n("a-table-column",{key:"create_time",attrs:{title:"创建时间","data-index":"create_time"}}),n("a-table-column",{key:"action",attrs:{title:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[1!==e.id&&2!==e.id&&3!==e.id&&4!==e.id?n("a-button",{attrs:{type:"link"},on:{click:function(a){return t.openModal("edit",e)}}},[t._v("编辑")]):t._e(),n("a-button",{attrs:{type:"link"},on:{click:function(a){return t.goSetRole(e)}}},[t._v("角色权限")])],1)]}}],null,!1,481599627)})],1)],1):n("div",{staticClass:"no-data"},[n("img",{staticClass:"no-data-img",attrs:{src:a("9485"),alt:"暂无数据"}})])]),n("a-modal",{attrs:{title:"add"===t.modalType?"添加角色":"编辑角色",visible:t.modalShow,"confirm-loading":t.confirmLoading,centered:!0,destroyOnClose:!0},on:{ok:t.modalSure,cancel:t.cancelModel}},[n("a-form-model",{ref:"ruleForm",attrs:{model:t.form,rules:t.rules,"label-col":t.labelCol,"wrapper-col":t.wrapperCol}},[n("a-form-model-item",{attrs:{label:"角色名称",prop:"name"}},[n("a-input",{attrs:{placeholder:"请输入角色名称(限制10个字符以内)",maxLength:10},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),n("a-form-model-item",{attrs:{label:"角色描述"}},[n("textarea-limit",{ref:"textAreaVal",attrs:{value:t.form.desc,totalLength:100}})],1),n("a-form-model-item",{attrs:{label:"角色状态"}},[n("a-switch",{attrs:{defaultChecked:t.form.state,"checked-children":"启用","un-checked-children":"禁用"},model:{value:t.form.state,callback:function(e){t.$set(t.form,"state",e)},expression:"form.state"}})],1),n("a-form-model-item",{attrs:{label:"角色排序",prop:"sort"}},[n("a-input",{attrs:{placeholder:"请输入角色排序"},model:{value:t.form.sort,callback:function(e){t.$set(t.form,"sort",e)},expression:"form.sort"}})],1)],1)],1)],1)},r=[],o=(a("99af"),a("a15b"),a("b0c0"),a("5530")),i=(a("96cf"),a("1da1")),s=a("365c"),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-area-limit"},[a("a-textarea",{staticClass:"input-area-limit",class:t.inputVal.length>t.totalLength?"border-red":"",attrs:{placeholder:"请输入...",rows:5,maxLength:t.totalLength},on:{input:t.titleChange},model:{value:t.inputVal,callback:function(e){t.inputVal=e},expression:"inputVal"}}),a("span",{staticClass:"count-length"},[t._v(t._s(t.countLength)+" / "+t._s(t.totalLength))]),a("p",{directives:[{name:"show",rawName:"v-show",value:t.inputVal.length>t.totalLength,expression:"inputVal.length > totalLength"}],staticClass:"overflow-tips"},[t._v(t._s(t.tipsText))])],1)},l=[],u=(a("a9e3"),{name:"textareaLimit",props:{totalLength:{type:Number,default:500},value:{type:String,default:""}},data:function(){return{countLength:this.value.length,isShow:!1,inputVal:this.value,tipsText:"输入不能超过"+this.totalLength+"字"}},methods:{titleChange:function(){this.countLength=this.inputVal.length,this.$emit("textAreaVal",this.inputVal)}}}),d=u,f=(a("2649"),a("2877")),m=Object(f["a"])(d,c,l,!1,null,"1370705a",null),p=m.exports,h={name:"role",components:{TextareaLimit:p},data:function(){var t=function(t,e,a){return e?isNaN(e)?a(new Error("请输入数字")):e<2||e>100?a(new Error("排序值范围在 (1,100] 之间")):void a():a(new Error("请输入排序值"))};return{data:[],selectedRows:[],loading:!1,pagination:{current:1,pageSize:10,total:1},searchWord:"",modalType:"add",modalShow:!1,confirmLoading:!1,labelCol:{span:4},wrapperCol:{span:16},form:{id:null,name:"",desc:"",state:!0,sort:null},rules:{name:[{required:!0,message:"名称不能为空",trigger:"blur"},{max:20,message:"输入字符应在20字内",trigger:"blur"}],sort:[{required:!0,message:"排序不能为空",trigger:"blur"},{validator:t,trigger:"blur"}]},tableCheck:[]}},computed:{rowSelection:function(){var t=this;return{onChange:function(e){t.tableCheck=[].concat(e)},getCheckboxProps:function(t){return{props:{disabled:2===t.id||3===t.id||4===t.id||1===t.id,name:t.name}}}}}},created:function(){this.getData()},methods:{getData:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r,o,i,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t&&(e.pagination.current=1),n={name:void 0===e.searchWord?"":e.searchWord,page:e.pagination.current,num:e.pagination.pageSize},a.next=4,s["a"].getRole(n);case 4:r=a.sent,o=r.code,i=r.data,c=r.msg,o?(e.data=[].concat(i.data),e.pagination.total=i.total):e.$message.error(c,2);case 9:case"end":return a.stop()}}),a)})))()},handleTableChange:function(t){var e=Object(o["a"])({},this.pagination);e.current=t.current,this.pagination=e,this.getData()},changeRoleState:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.state=0===t.state?1:0,a.next=3,s["a"].changeRoleState({id:t.id,state:t.state});case 3:n=a.sent,r=n.code,o=n.msg,r?e.$message.success(o,2):e.$message.error(o,2);case 7:case"end":return a.stop()}}),a)})))()},openModal:function(t,e){this.modalType=t,this.modalShow=!0,this.confirmLoading=!1,e?(this.form.id=e.id,this.form.name=e.name,this.form.desc=e.remarks,this.form.state=0===e.state,this.form.sort=e.sort):this.form={id:null,name:"",desc:"",state:!0,sort:null}},modalSure:function(){var t=this;this.$refs.ruleForm.validate(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(a){var n,r,o,i,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a){e.next=18;break}if(t.confirmLoading=!0,n={name:t.form.name,remarks:t.$refs.textAreaVal.inputVal,sort:t.form.sort,state:t.form.state?0:1,is_initiate:1},"add"!==t.modalType){e.next=9;break}return e.next=6,s["a"].addRole(n);case 6:r=e.sent,e.next=14;break;case 9:if("edit"!==t.modalType){e.next=14;break}return n.id=t.form.id,e.next=13,s["a"].editRole(n);case 13:r=e.sent;case 14:o=r,i=o.code,c=o.msg,i?(t.confirmLoading=!1,t.$message.success(c,2),t.modalShow=!1,t.getData()):(t.confirmLoading=!0,t.$message.error(c,2)),e.next=20;break;case 18:return t.$message.error("检验失败，请检查输入项！",2),e.abrupt("return",!1);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},cancelModel:function(){this.modalShow=!1,this.$refs.ruleForm.resetFields()},modalSwitchChange:function(t){this.form.state=t},delData:function(){if(0==this.tableCheck.length)this.$message.warning("请选择要删除的数据",2);else{var t=this;this.$confirm({title:"是否确定删除"+this.tableCheck.length+"项数据？",content:"",centered:!0,onOk:function(){return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n,r,o,i,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.tableCheck.join(","),e.next=3,s["a"].delRole({id:a});case 3:n=e.sent,r=n.code,o=n.msg,r?(t.$message.success(o,2),i=Math.ceil((t.pagination.total-1)/t.pagination.pageSize),c=t.pagination.current>i?i:t.pagination.current,t.pagination.current=c<1?1:c,t.getData()):t.$message.error(o,2);case 7:case"end":return e.stop()}}),e)})))()}})}},goSetRole:function(t){this.$router.push("/backManage/setRole?id=".concat(t.id))}}},g=h,b=(a("d132"),Object(f["a"])(g,n,r,!1,null,"0426fefa",null));e["default"]=b.exports},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,a){var n=a("1d80"),r=a("5899"),o="["+r+"]",i=RegExp("^"+o+o+"*"),s=RegExp(o+o+"*$"),c=function(t){return function(e){var a=String(n(e));return 1&t&&(a=a.replace(i,"")),2&t&&(a=a.replace(s,"")),a}};t.exports={start:c(1),end:c(2),trim:c(3)}},"69c2":function(t,e,a){},7156:function(t,e,a){var n=a("861d"),r=a("d2bb");t.exports=function(t,e,a){var o,i;return r&&"function"==typeof(o=e.constructor)&&o!==a&&n(i=o.prototype)&&i!==a.prototype&&r(t,i),t}},9485:function(t,e,a){t.exports=a.p+"img/nodata.78203cc4.png"},a9e3:function(t,e,a){"use strict";var n=a("83ab"),r=a("da84"),o=a("94ca"),i=a("6eeb"),s=a("5135"),c=a("c6b6"),l=a("7156"),u=a("c04e"),d=a("d039"),f=a("7c73"),m=a("241c").f,p=a("06cf").f,h=a("9bf2").f,g=a("58a8").trim,b="Number",v=r[b],k=v.prototype,x=c(f(k))==b,w=function(t){var e,a,n,r,o,i,s,c,l=u(t,!1);if("string"==typeof l&&l.length>2)if(l=g(l),e=l.charCodeAt(0),43===e||45===e){if(a=l.charCodeAt(2),88===a||120===a)return NaN}else if(48===e){switch(l.charCodeAt(1)){case 66:case 98:n=2,r=49;break;case 79:case 111:n=8,r=55;break;default:return+l}for(o=l.slice(2),i=o.length,s=0;s<i;s++)if(c=o.charCodeAt(s),c<48||c>r)return NaN;return parseInt(o,n)}return+l};if(o(b,!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var C,y=function(t){var e=arguments.length<1?0:t,a=this;return a instanceof y&&(x?d((function(){k.valueOf.call(a)})):c(a)!=b)?l(new v(w(e)),a,y):w(e)},_=n?m(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),S=0;_.length>S;S++)s(v,C=_[S])&&!s(y,C)&&h(y,C,p(v,C));y.prototype=k,k.constructor=y,i(r,b,y)}},b0c0:function(t,e,a){var n=a("83ab"),r=a("9bf2").f,o=Function.prototype,i=o.toString,s=/^\s*function ([^ (]*)/,c="name";n&&!(c in o)&&r(o,c,{configurable:!0,get:function(){try{return i.call(this).match(s)[1]}catch(t){return""}}})},b183:function(t,e,a){},d132:function(t,e,a){"use strict";var n=a("b183"),r=a.n(n);r.a}}]);