(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5c0657d6"],{2010:function(e,t,a){},"498a":function(e,t,a){"use strict";var s=a("23e7"),r=a("58a8").trim,n=a("c8d2");s({target:"String",proto:!0,forced:n("trim")},{trim:function(){return r(this)}})},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,a){var s=a("1d80"),r=a("5899"),n="["+r+"]",i=RegExp("^"+n+n+"*"),l=RegExp(n+n+"*$"),o=function(e){return function(t){var a=String(s(t));return 1&e&&(a=a.replace(i,"")),2&e&&(a=a.replace(l,"")),a}};e.exports={start:o(1),end:o(2),trim:o(3)}},7156:function(e,t,a){var s=a("861d"),r=a("d2bb");e.exports=function(e,t,a){var n,i;return r&&"function"==typeof(n=t.constructor)&&n!==a&&s(i=n.prototype)&&i!==a.prototype&&r(e,i),e}},"785a":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"task-search-title"},[a("span",{class:e.filterBoxShow?"":"black",on:{click:function(t){e.filterBoxShow=!e.filterBoxShow}}},[e._v(e._s(e.filterBoxShow?"收起":"展开")+"筛选 "),a("a-icon",{attrs:{type:e.filterBoxShow?"caret-up":"caret-down"}})],1)]),a("div",{staticClass:"split-box split-box-thin"}),a("div",{directives:[{name:"show",rawName:"v-show",value:e.filterBoxShow,expression:"filterBoxShow"}],staticClass:"search-box task-search"},[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.rankTask&&!e.rankCount,expression:"(!rankTask && !rankCount)"}],staticClass:"search-content search-status"},[a("span",{staticClass:"label-span"},[e._v("人员范围")]),a("a-radio-group",{attrs:{name:"status"},model:{value:e.dataObj.statUser,callback:function(t){e.$set(e.dataObj,"statUser",t)},expression:"dataObj.statUser"}},[a("a-radio",{attrs:{value:1}},[e._v("我的")]),parseInt(e.userInfo.type)>0?a("a-radio",{attrs:{value:2}},[e._v("部门")]):e._e(),parseInt(e.userInfo.type)>1?a("a-radio",{attrs:{value:0}},[e._v("全部")]):e._e(),parseInt(e.userInfo.type)>0?a("a-radio",{attrs:{value:3}},[e._v("自定义用户")]):e._e()],1),a("a-button",{directives:[{name:"show",rawName:"v-show",value:3===e.dataObj.statUser,expression:"dataObj.statUser === 3"}],on:{click:function(t){e.startUserWindow=!0}}},[e._v("选择人员")]),a("span",{directives:[{name:"show",rawName:"v-show",value:3===e.dataObj.statUser,expression:"dataObj.statUser === 3"}],staticClass:"user-span"},[e._v("已选"+e._s(e.startUserList.length)+"人")])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.rankCount,expression:"rankCount"}],staticClass:"search-content search-status"},[a("span",{staticClass:"label-span"},[e._v("排行维度")]),a("a-radio-group",{attrs:{name:"status"},model:{value:e.dataObj.statUser,callback:function(t){e.$set(e.dataObj,"statUser",t)},expression:"dataObj.statUser"}},[a("a-radio",{attrs:{value:1}},[e._v("个人")]),a("a-radio",{attrs:{value:2}},[e._v("部门")]),parseInt(e.userInfo.type)>0?a("a-radio",{attrs:{value:3}},[e._v("自定义用户")]):e._e()],1),a("a-button",{directives:[{name:"show",rawName:"v-show",value:3===e.dataObj.statUser,expression:"dataObj.statUser === 3"}],on:{click:function(t){e.startUserWindow=!0}}},[e._v("选择人员")]),a("span",{directives:[{name:"show",rawName:"v-show",value:3===e.dataObj.statUser,expression:"dataObj.statUser === 3"}],staticClass:"user-span"},[e._v("已选"+e._s(e.startUserList.length)+"人")])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.rankCount&&!e.rankDetail&&!e.rankList,expression:"!rankCount && !rankDetail&&!rankList"}],staticClass:"search-content search-level"},[a("span",{staticClass:"label-span"},[e._v("任务角色")]),a("a-checkbox",{attrs:{checked:e.isRoleAll},on:{change:e.roleAllChange}},[e._v("全部")]),a("a-checkbox-group",{attrs:{name:"level"},on:{change:e.roleChange},model:{value:e.roleChecked,callback:function(t){e.roleChecked=t},expression:"roleChecked"}},[a("a-checkbox",{attrs:{value:1}},[e._v("发起")]),a("a-checkbox",{attrs:{value:2}},[e._v("接收")]),a("a-checkbox",{attrs:{value:3}},[e._v("抄送")])],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.rankCount&&!e.rankDetail&&!e.rankList,expression:"!rankCount && !rankDetail && !rankList"}],staticClass:"search-content search-level"},[a("span",{staticClass:"label-span"},[e._v("任务状态")]),a("a-checkbox",{attrs:{checked:e.isStatusAll},on:{change:e.statusAllChange}},[e._v("全部")]),a("a-checkbox-group",{attrs:{name:"level"},on:{change:e.statusChange},model:{value:e.statusChecked,callback:function(t){e.statusChecked=t},expression:"statusChecked"}},[a("a-checkbox",{attrs:{value:1}},[e._v("待开始")]),a("a-checkbox",{attrs:{value:2}},[e._v("执行中")]),a("a-checkbox",{attrs:{value:3}},[e._v("逾期已完成")]),a("a-checkbox",{attrs:{value:5}},[e._v("逾期未完成")]),a("a-checkbox",{attrs:{value:4}},[e._v("已完成")])],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.rankDetail,expression:"!rankDetail"}],staticClass:"search-content search-level"},[a("span",{staticClass:"label-span"},[e._v("任务级别")]),a("a-checkbox",{attrs:{checked:e.isLevelAll},on:{change:e.levelAllChange}},[e._v("全部")]),a("a-checkbox-group",{attrs:{name:"level"},on:{change:e.levelChange},model:{value:e.levelChecked,callback:function(t){e.levelChecked=t},expression:"levelChecked"}},[a("a-checkbox",{attrs:{value:0}},[e._v("普通")]),a("a-checkbox",{attrs:{value:1}},[e._v("紧急")]),a("a-checkbox",{attrs:{value:2}},[e._v("非常紧急")])],1)],1),a("div",{staticClass:"search-content search-time"},[a("span",{staticClass:"label-span"},[e._v("发起时间")]),a("a-radio-group",{attrs:{name:"type"},model:{value:e.dataObj.startTimeType,callback:function(t){e.$set(e.dataObj,"startTimeType",t)},expression:"dataObj.startTimeType"}},[a("a-radio",{attrs:{value:0}},[e._v("不限")]),a("a-radio",{attrs:{value:1}},[e._v("近一周")]),a("a-radio",{attrs:{value:2}},[e._v("近一个月")]),a("a-radio",{attrs:{value:3}},[e._v("自定义")])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:3===e.dataObj.startTimeType,expression:"dataObj.startTimeType === 3"}],staticStyle:{display:"inline-block"}},[a("a-date-picker",{attrs:{allowClear:!1,inputReadOnly:!0,format:"YYYY-MM-DD",placeholder:"开始时间"},on:{change:e.stratTimeChange},model:{value:e.dataObj.sStartTime,callback:function(t){e.$set(e.dataObj,"sStartTime",t)},expression:"dataObj.sStartTime"}}),e._v(" - "),a("a-date-picker",{attrs:{allowClear:!1,inputReadOnly:!0,"disabled-date":e.disabledEndDate,format:"YYYY-MM-DD",placeholder:"结束时间"},on:{change:e.endTimeChange},model:{value:e.dataObj.sEndTime,callback:function(t){e.$set(e.dataObj,"sEndTime",t)},expression:"dataObj.sEndTime"}})],1)],1),a("div",{staticClass:"search-content search-time"},[a("span",{staticClass:"label-span"},[e._v("结束时间")]),a("a-radio-group",{attrs:{name:"areaRecycle"},model:{value:e.dataObj.endTimeType,callback:function(t){e.$set(e.dataObj,"endTimeType",t)},expression:"dataObj.endTimeType"}},[a("a-radio",{attrs:{value:0}},[e._v("不限")]),a("a-radio",{attrs:{value:1}},[e._v("近一周")]),a("a-radio",{attrs:{value:2}},[e._v("近一个月")]),a("a-radio",{attrs:{value:3}},[e._v("自定义")])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:3===e.dataObj.endTimeType,expression:"dataObj.endTimeType === 3"}],staticStyle:{display:"inline-block"}},[a("a-date-picker",{attrs:{allowClear:!1,inputReadOnly:!0,format:"YYYY-MM-DD",placeholder:"开始时间"},on:{change:e.stratTimeChange2},model:{value:e.dataObj.eStartTime,callback:function(t){e.$set(e.dataObj,"eStartTime",t)},expression:"dataObj.eStartTime"}}),e._v(" - "),a("a-date-picker",{attrs:{allowClear:!1,inputReadOnly:!0,"disabled-date":e.disabledEndDate2,format:"YYYY-MM-DD",placeholder:"结束时间"},on:{change:e.endTimeChange2},model:{value:e.dataObj.eEndTime,callback:function(t){e.$set(e.dataObj,"eEndTime",t)},expression:"dataObj.eEndTime"}})],1),a("a-button",{staticClass:"filter-search-btn",attrs:{type:"primary"},on:{click:e.search}},[e._v("搜索")])],1)]),a("pick-user",{attrs:{show:e.startUserWindow,"selected-user":e.startUserList,"is-data":1},on:{"update:show":function(t){e.startUserWindow=t},done:e.getStartUser}})],1)},r=[],n=(a("99af"),a("4160"),a("a15b"),a("d81d"),a("b0c0"),a("a9e3"),a("ac1f"),a("1276"),a("159b"),a("adc3")),i={name:"filterComponents",components:{PickUser:n["a"]},props:{rankCount:{type:Boolean,default:!1},rankTask:{type:Boolean,default:!1},rankDetail:{type:Boolean,default:!1},rankList:{type:Boolean,default:!1},backObj:{type:Object}},data:function(){return{filterBoxShow:!0,dataObj:{statUser:1,strarUserId:"",taskRole:"1,2,3",taskLevel:"0,1,2",taskStatus:"1,2,3,4,5",startTimeType:0,sStartTime:null,sEndTime:null,endTimeType:0,eStartTime:null,eEndTime:null},isStatusAll:!0,isLevelAll:!0,isRoleAll:!0,roleChecked:[1,2,3],statusChecked:[1,2,3,4,5],levelChecked:[0,1,2],startUserWindow:!1,stratUserText:"",startUserList:[],userInfo:JSON.parse(sessionStorage.getItem("userInfo"))}},watch:{roleChecked:function(e){this.isRoleAll=3===e.length},statusChecked:function(e){this.isStatusAll=5===e.length},levelChecked:function(e){this.isLevelAll=3===e.length}},created:function(){this.backObj&&this.getPropsObj(this.backObj)},methods:{getPropsObj:function(e){if(e){console.log(e);var t=this.dataObj;if(t.statUser=e.statUser,t.strarUserId=e.strarUserId,t.taskLevel=-1===e.taskLevel?"0,1,2":e.taskLevel,t.taskStatus=e.taskStatus,t.startTimeType=e.startTimeType,t.sStartTime=e.sStartTime,t.sEndTime=e.sEndTime,t.endTimeType=e.endTimeType,t.eStartTime=e.eStartTime,t.eEndTime=e.eEndTime,this.roleChecked=e.taskRole?e.taskRole.split(",").map(Number):[1,2,3],this.statusChecked=e.taskStatus?e.taskStatus.split(",").map(Number):[1,2,3,4,5],this.levelChecked=e.taskLevel?e.taskLevel.split(",").map(Number):[2,3,4],t.strarUserId){var a=JSON.parse(sessionStorage.getItem("diyUser"));this.startUserList=[].concat(a)}}},getStartUser:function(e){if(e.userId&&e.userId.length>0&&(this.dataObj.strarUserId=e.userId.join(",")),e.user&&e.user.length>0){var t=[];this.startUserList=[].concat(e.user),e.user.forEach((function(e){t.push(e.name)})),this.stratUserText=t.join(",")}else this.stratUserText="",this.startUserList=[]},disabledEndDate:function(e){var t=this.dataObj.sStartTime;return!(!e||!t)&&t.valueOf()>=e.valueOf()},stratTimeChange:function(e){this.dataObj.sStartTime=e},endTimeChange:function(e){this.dataObj.sEndTime=e},disabledEndDate2:function(e){var t=this.dataObj.eStartTime;return!(!e||!t)&&t.valueOf()>=e.valueOf()},stratTimeChange2:function(e){this.dataObj.eStartTime=e},endTimeChange2:function(e){this.dataObj.eEndTime=e},statusAllChange:function(e){e.target.checked?(this.statusChecked=[1,2,3,4,5],this.isStatusAll=!0):(this.statusChecked=[],this.isStatusAll=!1)},statusChange:function(e){this.isStatusAll=4===e.length,this.taskStatus=e.length>0?e.join(","):0},levelAllChange:function(e){e.target.checked?(this.levelChecked=[0,1,2],this.isLevelAll=!0):(this.levelChecked=[],this.isLevelAll=!1)},levelChange:function(e){this.isLevelAll=3===e.length,this.taskLevel=e.length>0?e.join(","):-1},roleAllChange:function(e){e.target.checked?(this.roleChecked=[1,2,3],this.isRoleAll=!0):(this.roleChecked=[],this.isRoleAll=!1)},roleChange:function(e){this.isRoleAll=3===e.length,this.taskStatus=e.length>0?e.join(","):0},search:function(){3==this.dataObj.statUser&&0==this.startUserList.length?this.$message.error("发起人员自定义用户未选择人员"):3!=this.dataObj.startTimeType||null!=this.dataObj.sStartTime&&null!=this.dataObj.sEndTime?3!=this.dataObj.endTimeType||null!=this.dataObj.eStartTime&&null!=this.dataObj.eEndTime?(this.dataObj.taskRole=this.roleChecked.length>0?this.roleChecked.join(","):0,this.dataObj.taskLevel=this.levelChecked.length>0?this.levelChecked.join(","):-1,this.dataObj.taskStatus=this.statusChecked.length>0?this.statusChecked.join(","):0,this.$emit("done",this.dataObj),sessionStorage.setItem("diyUser",JSON.stringify(this.startUserList)),sessionStorage.setItem("staCountFilter",JSON.stringify(this.dataObj))):this.$message.error("结束时间自定义时间不能为空",2):this.$message.error("发起时间自定义时间不能为空",2)}}},l=i,o=(a("d5a9"),a("2877")),c=Object(o["a"])(l,s,r,!1,null,"229046e1",null);t["a"]=c.exports},"896c":function(e,t,a){},9485:function(e,t,a){e.exports=a.p+"img/nodata.78203cc4.png"},"977e":function(e,t,a){"use strict";var s=a("2010"),r=a.n(s);r.a},a9e3:function(e,t,a){"use strict";var s=a("83ab"),r=a("da84"),n=a("94ca"),i=a("6eeb"),l=a("5135"),o=a("c6b6"),c=a("7156"),d=a("c04e"),u=a("d039"),h=a("7c73"),v=a("241c").f,p=a("06cf").f,m=a("9bf2").f,f=a("58a8").trim,k="Number",b=r[k],g=b.prototype,T=o(h(g))==k,_=function(e){var t,a,s,r,n,i,l,o,c=d(e,!1);if("string"==typeof c&&c.length>2)if(c=f(c),t=c.charCodeAt(0),43===t||45===t){if(a=c.charCodeAt(2),88===a||120===a)return NaN}else if(48===t){switch(c.charCodeAt(1)){case 66:case 98:s=2,r=49;break;case 79:case 111:s=8,r=55;break;default:return+c}for(n=c.slice(2),i=n.length,l=0;l<i;l++)if(o=n.charCodeAt(l),o<48||o>r)return NaN;return parseInt(n,s)}return+c};if(n(k,!b(" 0o1")||!b("0b1")||b("+0x1"))){for(var C,y=function(e){var t=arguments.length<1?0:e,a=this;return a instanceof y&&(T?u((function(){g.valueOf.call(a)})):o(a)!=k)?c(new b(_(t)),a,y):_(t)},O=s?v(b):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),S=0;O.length>S;S++)l(b,C=O[S])&&!l(y,C)&&m(y,C,p(b,C));y.prototype=g,g.constructor=y,i(r,k,y)}},c792:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"ranking-list"},[s("header",{staticClass:"page-header"},[s("span",{staticClass:"page-title"},[e._v(e._s(e.pageName)+"-排行详情")]),s("div",{staticStyle:{float:"right",position:"relative"},attrs:{id:"optionBtn"}},[s("a-button",{on:{click:function(t){return e.$router.go(-1)}}},[e._v("返回")])],1)]),s("div",{staticClass:"split-box"}),s("div",{staticClass:"data-charts"},[s("filter-module",{attrs:{"rank-detail":!0,"back-obj":e.filterData},on:{done:e.getFilterData}}),s("div",{staticClass:"power-table"},[e.dataArr.length>0?s("div",{staticClass:"table-content"},[s("a-table",{attrs:{columns:e.columns,rowKey:function(e){return e.userid},"data-source":e.dataArr,pagination:e.pagination,loading:e.loading},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"action",fn:function(t,a){return[s("span",[s("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.seeDetail(a.name,a.userid)}}},[e._v("查看详情")])],1)]}},{key:"overtimeRate",fn:function(t){return[s("span",[e._v(e._s(t)+"%")])]}},{key:"completeRate",fn:function(t){return[s("span",[e._v(e._s(t)+"%")])]}},{key:"ontimeCompleteRate",fn:function(t){return[s("span",[e._v(e._s(t)+"%")])]}}],null,!1,1181023798)})],1):s("div",{staticClass:"no-data"},[s("img",{staticClass:"no-data-img",attrs:{src:a("9485"),alt:"暂无数据"}})])])],1)])},r=[],n=(a("99af"),a("4160"),a("b0c0"),a("498a"),a("159b"),a("5530")),i=(a("96cf"),a("1da1")),l=a("365c"),o=a("785a"),c=a("c1df"),d=a.n(c),u={name:"rankDetail",components:{filterModule:o["a"]},data:function(){return{pageType:this.$route.query.pageType?this.$route.query.pageType:"all_num",pageName:this.$route.query.name?this.$route.query.name:"任务总数",taskCountFilter:[],filterData:{statUser:1,strarUserId:"",taskRole:"1,2,3",taskLevel:"0,1,2",taskStatus:"1,2,3,4,5",startTimeType:0,sStartTime:null,sEndTime:null,endTimeType:0,eStartTime:null,eEndTime:null},loading:!1,pagination:{current:1,pageSize:10,total:1},sortType:"asc",sorrArr:["ascend","descend"],dataArr:[],columns:[{title:"排序",dataIndex:"orderNum",key:"orderNum"},{title:"用户名称",dataIndex:"name",ellipsis:!0,key:"name"},{title:"任务总数",dataIndex:"all_total_count",sorter:!0,key:"all_total_count"},{title:"待处理",sorter:!0,dataIndex:"untreated_count",key:"untreated_count"},{title:"逾期次数",dataIndex:"overdue_count",key:"overdue_count",sorter:!0},{title:"逾期数量",dataIndex:"overdue_num",key:"overdue_num",sorter:!0},{title:"逾期率",dataIndex:"overdue_rate",key:"overdue_rate",sorter:!0,scopedSlots:{customRender:"overtimeRate"}},{title:"完成数量",dataIndex:"finish_count",key:"finish_count",sorter:!0},{title:"完成率",dataIndex:"finish_rate",key:"finish_rate",sorter:!0,scopedSlots:{customRender:"completeRate"}},{title:"按时完成率",dataIndex:"ontime_finish_rate",key:"ontime_finish_rate",sorter:!0,scopedSlots:{customRender:"ontimeCompleteRate"}},{title:"操作",key:"action",dataIndex:"action",scopedSlots:{customRender:"action"}}]}},created:function(){this.getLastPageSearch(),this.getData()},methods:{moment:d.a,getLastPageSearch:function(){var e=JSON.parse(sessionStorage.getItem("staCountFilter"));e&&(this.filterData=e)},getFilterData:function(e){this.filterData=e,this.getData(1)},getData:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var s,r,n,i,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.loading=!0,e&&(t.pagination.current=1),s={people_type:t.filterData.statUser,people_userid:t.filterData.strarUserId,level:t.filterData.taskLevel,launch_time:t.filterData.startTimeType,l_start_time:t.filterData.sStartTime?d()(t.filterData.sStartTime).format("YYYY-MM-DD"):null,l_end_time:t.filterData.sEndTime?d()(t.filterData.sEndTime).format("YYYY-MM-DD"):null,end_time:t.filterData.endTimeType,e_start_time:t.filterData.eStartTime?d()(t.filterData.eStartTime).format("YYYY-MM-DD"):null,e_end_time:t.filterData.eEndTime?d()(t.filterData.eEndTime).format("YYYY-MM-DD"):null,page:t.pagination.current,limit:t.pagination.pageSize,order:t.sortType,order_field:t.pageType.trim()},a.next=5,l["c"].rankListMore(s);case 5:r=a.sent,n=r.data,i=r.msg,o=r.code,o?(console.log(n),t.pagination.total=n.total,t.dataArr=[].concat(n.data),t.dataArr&&t.dataArr.length>0&&t.dataArr.forEach((function(e,a){e.orderNum=(t.pagination.current-1)*t.pagination.pageSize+a+1})),t.loading=!1):(t.$message.error(i,2),t.loading=!1);case 10:case"end":return a.stop()}}),a)})))()},handleTableChange:function(e,t,a){console.log(t);var s=Object(n["a"])({},this.pagination);s.current=e.current,this.pagination=s,"ascend"===a.order?this.sortType="asc":this.sortType="desc",this.getData()},seeDetail:function(e,t){this.$router.push({path:"/dataSta/rankTaskDetail",query:{name:e,id:t}})}}},h=u,v=(a("977e"),a("2877")),p=Object(v["a"])(h,s,r,!1,null,"bacd7e9c",null);t["default"]=p.exports},c8d2:function(e,t,a){var s=a("d039"),r=a("5899"),n="​᠎";e.exports=function(e){return s((function(){return!!r[e]()||n[e]()!=n||r[e].name!==e}))}},d5a9:function(e,t,a){"use strict";var s=a("896c"),r=a.n(s);r.a}}]);