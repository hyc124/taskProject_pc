(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-66ef2907"],{2014:function(t,e,a){"use strict";var s=a("eb37"),i=a.n(s);i.a},"59db":function(t,e,a){"use strict";var s=a("f2e9"),i=a.n(s);i.a},9485:function(t,e,a){t.exports=a.p+"img/nodata.78203cc4.png"},eb37:function(t,e,a){},f2e9:function(t,e,a){},f2fe:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"task-list"},[s("a-spin",{attrs:{spinning:t.loading}},[t.taskList.length>0?s("div",{staticClass:"task-content"},[s("ul",{staticClass:"task-list-ul clear-fix"},t._l(t.taskList,(function(e,a){return s("li",{key:a,staticClass:"task-list-li",class:0===e.role?"border-orange":1===e.role?"border-green":"border-purple",on:{click:function(a){return t.goDetail(e.id,e.look)}}},[s("p",{staticClass:"name"},[s("span",{staticClass:"name-text"},[t._v(t._s(e.title))]),s("span",{directives:[{name:"show",rawName:"v-show",value:0!==e.look&&"executing"===t.pageType&&(1===e.role||2===e.role),expression:"item.look !== 0 && pageType === 'executing' && (item.role === 1 || item.role === 2)"}],staticClass:"new-task"},[t._v(" New !")])]),s("div",{staticClass:"option clear-fix"},[s("div",{staticClass:"left"},[0==e.role?s("span",{staticClass:"task-option"},[t._v("发起")]):t._e(),1==e.role?s("span",{staticClass:"task-option"},[t._v("接收")]):t._e(),2==e.role?s("span",{staticClass:"task-option"},[t._v("抄送")]):t._e(),s("div",{staticClass:"hot-level"},t._l(parseInt(e.level)+1,(function(e){return s("i",{key:e,staticClass:"iconfont hot-red"},[t._v("")])})),0)]),s("div",{staticClass:"right"},[s("span",{staticClass:"status",class:"status-"+t.getStatus(e).class},[t._v(t._s(t.getStatus(e).text))]),s("a-icon",{staticClass:"goDetail",attrs:{type:"right"}})],1)]),s("p",{staticClass:"task-time time-red",class:"time-"+t.getStatus(e).class},[t._v(" "+t._s(t.getStatus(e).time)+" ")]),s("p",{staticClass:"create-time"},[t._v(" 创建时间 "+t._s(t.moment(e.create_time).format("MM月DD日 HH:mm")))])])})),0)]):s("div",{staticClass:"no-data"},[s("img",{staticClass:"no-data-img",attrs:{src:a("9485"),alt:"暂无数据"}})])]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showPagination,expression:"showPagination"}],staticClass:"paging"},[s("a-pagination",{attrs:{current:t.pageIndex,total:t.pageTotal,defaultPageSize:t.pageSize,hideOnSinglePage:!0},on:{change:t.pageChange}})],1)],1)},i=[],c=(a("99af"),a("4de4"),a("96cf"),a("1da1")),n=a("365c"),o=a("c1df"),l=a.n(o),r={name:"taskListModule",props:{pageType:{type:String,default:"allTask"},filter:{type:Object},showPagination:{type:Boolean,default:!0},countFilter:{type:Object},isPeoplesTask:{type:Boolean,default:!1}},data:function(){return{taskList:[],loading:!1,filterObj:{status:0,area:0,level:-1,type:0,areaRecycle:0,inp:""},countFilterObj:{},pageIndex:1,pageSize:6,pageTotal:1,role:{0:"start",1:"receive",2:"cc"},status:{0:"grey",1:"blue",2:"red",3:"green"}}},watch:{filter:{handler:function(t){t&&(this.filterObj=t||this.filterObj,this.getData(1))},deep:!0,immediate:!0},countFilter:{handler:function(t){t&&(this.countFilterObj=t,this.getData(1))},deep:!0,immediate:!0}},created:function(){this.filter||this.countFilter||this.getData()},methods:{moment:l.a,getData:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var s,i,c,o,r,p,u,f,m,h;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e.loading=!0,e.isPeoplesTask){a.next=17;break}return t&&(e.pageIndex=1),s={level:e.filterObj.level,time:e.filterObj.area,titlekey:e.filterObj.inp,num:e.pageSize,page:e.pageIndex},"recycleBin"===e.pageType?s.type=3:"drafts"===e.pageType?s.type=2:"finished"===e.pageType?s.type=1:"executing"===e.pageType?s.type=0:"allTask"===e.pageType?s.type=4:"overdueList"===e.pageType?s.type=7:"homeFinished"===e.pageType&&(s.type=6),"finished"!==e.pageType&&"homeFinished"!==e.pageType&&"overdueList"!==e.pageType&&"executing"!==e.pageType&&"allTask"!==e.pageType||(s.state=e.filterObj.status,s.role=e.filterObj.type),"executing"===e.pageType||e.pageType,"drafts"===e.pageType&&delete s.role,a.next=10,n["d"].list(s);case 10:i=a.sent,c=i.code,o=i.msg,r=i.data,1===c?(e.loading=!1,e.taskList=[].concat(r.data),e.$emit("getNum",r.data),e.pageTotal=r.total):(e.loading=!0,e.$message.error(o,2)),a.next=26;break;case 17:return t&&(e.pageIndex=1),p={userid:e.countFilterObj.userId,role_type:e.countFilterObj.taskRole,status:e.countFilterObj.taskStatus,level:e.countFilterObj.taskLevel,launch_time:e.countFilterObj.startTimeType,l_start_time:e.countFilterObj.sStartTime?l()(e.countFilterObj.sStartTime).format("YYYY-MM-DD"):null,l_end_time:e.countFilterObj.sEndTime?l()(e.countFilterObj.sEndTime).format("YYYY-MM-DD"):null,end_time:e.countFilterObj.endTimeType,e_start_time:e.countFilterObj.eStartTime?l()(e.countFilterObj.eStartTime).format("YYYY-MM-DD"):null,page:e.pageIndex,limit:e.pageSize},a.next=21,n["c"].peopleTask(p);case 21:u=a.sent,f=u.code,m=u.msg,h=u.data,1===f?(e.loading=!1,e.taskList=[].concat(h.data),e.pageTotal=h.total):(e.loading=!0,e.$message.error(m,2));case 26:case"end":return a.stop()}}),a)})))()},pageChange:function(t){this.pageIndex=t,this.getData()},getStatus:function(t){var e=l()(t.start_time),a=l()(t.end_time),s=t.finish_time,i=t.new_end_time,c=l()(new Date),n=this.calcDiffDay(e,a);t.role=void 0==t.role?2:t.role;var o="MM月DD日 HH:mm",r="".concat(e.format(o),"-").concat(a.format(o)),p=0==i?this.calcDiffDay(a,c):this.calcDiffDay(l()(i),a);return"drafts"==this.pageType?{class:this.status[1],text:"",time:"".concat(r," 共").concat(n,"天")}:"overdueList"===this.pageType?(p=2==(t.role=t.role)?s?this.calcDiffDay(l()(s),c):this.calcDiffDay(a,c):i&&t.completion>0?this.calcDiffDay(l()(i),a):this.calcDiffDay(a,c),{class:this.status[2],text:"逾期",time:"".concat(r," 逾期").concat(p,"天")}):"recycleBin"===this.pageType?{class:this.status[0],text:"已取消",time:"".concat(r," 共").concat(n,"天")}:"finished"===this.pageType?(p=2==(t.role=t.role)?s?this.calcDiffDay(l()(s),c):this.calcDiffDay(a,c):i&&t.completion>0?this.calcDiffDay(l()(i),a):this.calcDiffDay(a,c),{class:this.status[3],text:"完成"+t.completion+"%",time:"".concat(r," 共").concat(n,"天")}):"drafts"===this.pageType?{class:this.status[1],text:"",time:"".concat(r," 共").concat(n,"天")}:0==t.role||2==t.role?1==t.status?l()(e).isAfter(l()(c))?{class:this.status[0],text:"待开始",time:"".concat(r," 共").concat(n,"天")}:0==t.finish_time||""==t.finish_time?l()(c).isAfter(l()(a))?{class:this.status[2],text:"逾期"+t.completion+"%",time:"".concat(r," 逾期").concat(this.calcDiffDay(a,c),"天")}:{class:this.status[1],text:t.completion+"%",time:"".concat(r," 共").concat(n,"天")}:t.completion<100&&l()(s).isAfter(l()(a))?{class:this.status[2],text:"逾期"+t.completion+"%",time:"".concat(r," 逾期").concat(this.calcDiffDay(a,l()(s)),"天")}:100==t.completion?l()(t.finish_time).isAfter(a)?{class:this.status[2],text:"逾期完成"+t.completion+"%",time:"".concat(r," 逾期").concat(this.calcDiffDay(a,l()(s)),"天")}:{class:this.status[3],text:"完成",time:"".concat(r," 共").concat(n,"天")}:{class:this.status[1],text:t.completion+"%",time:"".concat(r," 共").concat(n,"天")}:t.completion<100&&l()(t.finish_time).isAfter(l()(a))?{class:this.status[2],text:"逾期"+t.completion+"%",time:"".concat(r," 逾期").concat(this.calcDiffDay(a,l()(s)),"天")}:100==t.completion&&l()(t.finish_time).isAfter(a)?{class:this.status[2],text:"逾期完成"+t.completion+"%",time:"".concat(r," 逾期").concat(this.calcDiffDay(a,l()(s)),"天")}:{class:this.status[3],text:"完成",time:"".concat(r," 共").concat(n,"天")}:1==t.role?1==t.status?l()(e).isAfter(l()(c))?{class:this.status[0],text:"待开始",time:"".concat(r," 共").concat(n,"天")}:0==i&&l()(c).isAfter(a)?{class:this.status[2],text:"逾期",time:"".concat(r," 逾期").concat(p,"天")}:0==t.completion?l()(c).isAfter(a)?{class:this.status[2],text:"逾期",time:"".concat(r," 逾期").concat(this.calcDiffDay(a,c),"天")}:{class:this.status[1],text:"进行中",time:"".concat(r," 剩余").concat(p,"天")}:100==t.completion?l()(i).isBefore(a)?{class:this.status[3],text:"已完成",time:"".concat(r," 剩余").concat(p,"天")}:{class:this.status[2],text:"已逾期完成",time:"".concat(r," 逾期").concat(p,"天")}:{class:this.status[3],text:"已完成"+t.completion+"%"}:0==i?{class:this.status[0],text:"未完成",time:"".concat(r," 共").concat(p,"天")}:l()(i).isBefore(c)?{class:this.status[3],text:"已完成",time:"".concat(r," 剩余").concat(p,"天")}:{class:this.status[2],text:"已逾期完成",time:"".concat(r," 逾期").concat(p,"天")}:void 0},calcDiffDay:function(t,e){var a=e.diff(t,"days");return Math.abs(Math.floor(10*a)/10)},goDetail:function(t,e){this.$router.push({path:"/taskDetail/taskDetail",query:{id:t,pageType:this.pageType,look:e}})}}},p=r,u=(a("59db"),a("2014"),a("2877")),f=Object(u["a"])(p,s,i,!1,null,"7797d14a",null);e["a"]=f.exports}}]);