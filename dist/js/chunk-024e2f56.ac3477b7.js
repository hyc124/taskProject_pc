(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-024e2f56"],{2909:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e){if(Array.isArray(e))return r(e)}n.d(t,"a",(function(){return o}));n("a4d3"),n("e01a"),n("d28b"),n("a630"),n("d3b7"),n("3ca3"),n("ddb0");function i(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}n("fb6a"),n("b0c0"),n("25f0");function c(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(e){return a(e)||i(e)||c(e)||s()}},"466d":function(e,t,n){"use strict";var r=n("d784"),a=n("825a"),i=n("50c4"),c=n("1d80"),s=n("8aa5"),o=n("14c3");r("match",1,(function(e,t,n){return[function(t){var n=c(this),r=void 0==t?void 0:t[e];return void 0!==r?r.call(t,n):new RegExp(t)[e](String(n))},function(e){var r=n(t,e,this);if(r.done)return r.value;var c=a(e),d=String(this);if(!c.global)return o(c,d);var u=c.unicode;c.lastIndex=0;var h,l=[],f=0;while(null!==(h=o(c,d))){var p=String(h[0]);l[f]=p,""===p&&(c.lastIndex=s(d,i(c.lastIndex),u)),f++}return 0===f?null:l}]}))},"4df4":function(e,t,n){"use strict";var r=n("0366"),a=n("7b0b"),i=n("9bdd"),c=n("e95a"),s=n("50c4"),o=n("8418"),d=n("35a1");e.exports=function(e){var t,n,u,h,l,f,p=a(e),k="function"==typeof this?this:Array,g=arguments.length,v=g>1?arguments[1]:void 0,b=void 0!==v,m=d(p),w=0;if(b&&(v=r(v,g>2?arguments[2]:void 0,2)),void 0==m||k==Array&&c(m))for(t=s(p.length),n=new k(t);t>w;w++)f=b?v(p[w],w):p[w],o(n,w,f);else for(h=m.call(p),l=h.next,n=new k;!(u=l.call(h)).done;w++)f=b?i(h,v,[u.value,w],!0):u.value,o(n,w,f);return n.length=w,n}},a434:function(e,t,n){"use strict";var r=n("23e7"),a=n("23cb"),i=n("a691"),c=n("50c4"),s=n("7b0b"),o=n("65f0"),d=n("8418"),u=n("1dde"),h=n("ae40"),l=u("splice"),f=h("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,k=Math.min,g=9007199254740991,v="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!l||!f},{splice:function(e,t){var n,r,u,h,l,f,b=s(this),m=c(b.length),w=a(e,m),y=arguments.length;if(0===y?n=r=0:1===y?(n=0,r=m-w):(n=y-2,r=k(p(i(t),0),m-w)),m+n-r>g)throw TypeError(v);for(u=o(b,r),h=0;h<r;h++)l=w+h,l in b&&d(u,h,b[l]);if(u.length=r,n<r){for(h=w;h<m-r;h++)l=h+r,f=h+n,l in b?b[f]=b[l]:delete b[f];for(h=m;h>m-r+n;h--)delete b[h-1]}else if(n>r)for(h=m-r;h>w;h--)l=h+r-1,f=h+n-1,l in b?b[f]=b[l]:delete b[f];for(h=0;h<n;h++)b[h+w]=arguments[h+2];return b.length=m-r+n,u}})},a630:function(e,t,n){var r=n("23e7"),a=n("4df4"),i=n("1c7e"),c=!i((function(e){Array.from(e)}));r({target:"Array",stat:!0,forced:c},{from:a})},adc3:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e._show?n("a-modal",{staticClass:"pickUserBox",attrs:{title:"请选择人员",visible:e._show,footer:"",centered:"",width:"600px",height:"600px",destroyOnClose:!0},on:{"update:visible":function(t){e._show=t},cancel:function(t){e._show=!1}}},[n("div",[n("a-row",[n("a-col",{staticClass:"left-box",staticStyle:{position:"relative"},attrs:{span:12}},[n("a-row",[n("a-col",{attrs:{span:18,height:""}},[n("a-input",{staticStyle:{width:"100%"},attrs:{allowClear:"",placeholder:"请输入成员名称",size:"small"},on:{change:e.inputChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.btnSearch(t)}},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}})],1),n("a-col",{staticStyle:{"margin-left":"4px"},attrs:{span:5}},[n("a-button",{attrs:{type:"primary",icon:"search",size:"small"},on:{click:e.btnSearch}})],1)],1),n("div",{directives:[{name:"show",rawName:"v-show",value:e.searchShow,expression:"searchShow"}],staticClass:"searchBox box"},[e.searchList.length?e._e():n("span",[e._v("没有搜索到相关内容")]),e._l(e.searchList,(function(t){return n("div",{key:t.id,staticClass:"item"},[n("a-checkbox",{attrs:{checked:t.checked,disabled:t.disabled},on:{change:function(n){e.checkChange(n,t.id)}}},[e._v(" "+e._s(t.label)+" ")])],1)}))],2),e.isLoad?n("div",{directives:[{name:"show",rawName:"v-show",value:!e.searchShow,expression:"!searchShow"}],staticClass:"box"},[n("a-tabs",{staticClass:"tabs-card",attrs:{type:"card",animated:""},model:{value:e.tabKey,callback:function(t){e.tabKey=t},expression:"tabKey"}},[n("a-tab-pane",{key:1,attrs:{tab:"组织架构"}},[n("a-directory-tree",{ref:"struct",staticClass:"struct",attrs:{"node-key":"id",checkable:"",blockNode:"","show-icon":!0,"check-strictly":!0,"check-on-click-node":!0,"expand-on-click-node":!1,"load-data":e.loadNode,"tree-data":e.treeData,"replace-fields":e.replaceFields},on:{select:e.checkChange},model:{value:e.checkUserId,callback:function(t){e.checkUserId=t},expression:"checkUserId"}})],1),n("a-tab-pane",{key:2,attrs:{tab:"标签"}},[n("a-tree",{ref:"tag",staticClass:"tag",attrs:{"node-key":"id",checkable:"",blockNode:"","show-icon":!0,"check-strictly":!0,"check-on-click-node":!0,"expand-on-click-node":!1,"load-data":e.loadTagNode,"tree-data":e.tagsData,"replace-fields":e.replaceFields},on:{select:e.checkChange},scopedSlots:e._u([{key:"custom",fn:function(t){var r=t.selected;return[r?n("a-icon",{staticClass:"checked",attrs:{type:"check"}}):e._e()]}}],null,!1,3490311004),model:{value:e.checkUserId,callback:function(t){e.checkUserId=t},expression:"checkUserId"}},[n("a-icon",{attrs:{slot:"switcherIcon",type:"folder"},slot:"switcherIcon"})],1)],1)],1)],1):e._e()],1),n("a-col",{staticClass:"right-box",attrs:{span:12}},[n("div",{staticClass:"selectedNum"},[e._v(" 已选中（ "+e._s(Object.keys(e.checkedList.user).length)+" ） ")]),n("div",{staticClass:"checkedBox"},e._l(e.checkedList.user,(function(t,r){return n("div",{key:r,staticClass:"checkedUser",on:{click:function(n){return e.openInfo(t)}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!e.checkedList.filter||e.checkedList.filter&&t.indexOf(e.checkedList.filter)>-1,expression:"\n              !checkedList.filter ||\n              (checkedList.filter && value.indexOf(checkedList.filter) > -1)\n            "}],key:r},[n("span",[e._v(e._s(t.label))]),e.isLook?e._e():n("a-icon",{staticClass:"close-icon",attrs:{type:"close"},on:{click:function(n){return n.stopPropagation(),e.delChecked("user",r,t)}}})],1)])})),0)])],1),e.isLook?e._e():n("div",{staticClass:"dialog-footer alignR pd20",attrs:{slot:"footer"},slot:"footer"},[n("a-button",{on:{click:function(t){e._show=!1}}},[e._v("取 消"+e._s(e.isLook))]),n("a-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary"},on:{click:e.btnSave}},[e._v("确 定 ")])],1)],1)]):e._e()},a=[],i=(n("99af"),n("4de4"),n("c740"),n("4160"),n("c975"),n("d81d"),n("13d5"),n("a434"),n("b0c0"),n("ac1f"),n("1276"),n("159b"),n("2909")),c=(n("96cf"),n("1da1")),s=n("365c"),o=n("e96b"),d={name:"pickUser",props:["show","selectedUser","selectedDep","radio","type","onlyShowSiblings","noConversionDep","noGroupUser","diag","isChangeType","filterData","isLook","isData"],computed:{_show:{get:function(){return this.show},set:function(e){this.$emit("update:show",e)}},_selectedUser:{get:function(){return this.selectedUser||[]},set:function(e){this.$emit("update:selectedUser",e)}},_selectedDep:{get:function(){return this.selectedDep||{}},set:function(e){this.$emit("update:selectedDep",e)}}},watch:{_show:function(e){e&&(this.keyword="",this.searchShow=!1,this.loading=!0,this.isLoad=!0,this.getTreeData(),this.getTagsData(),this.userData=this._selectedUser.map((function(e){return e.name&&(e.label=e.name,e.id=e.userid?e.userid:e.id),e})),this.checkedList.userId=this.checkUserId=this._selectedUser.map((function(e){return e.userid?e.userid:e.id})),this.checkedList.dep=this._selectedUser.map((function(e){return e.dep?e.dep:e.dep_id})),this.checkedList.user=JSON.parse(JSON.stringify(this._selectedUser)),this.$nextTick().then((function(){})))}},data:function(){return{loading:!0,keyword:"",checkedList:{userId:[],user:[],dep:[]},checkUserId:[],userParentId:{},searchShow:!1,searchList:[],searchUser:[],activeName:"",dataType:"",isLoad:!0,treeData:[],replaceFields:{title:"label",key:"id"},tagsData:[],userData:[],currentDepart:{},showIcon:!0,tabKey:1}},methods:{getTreeData:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={},e.isData&&(n.is_data=e.isData),t.next=4,s["b"].getDepartNodeInit(n);case 4:r=t.sent,a=r.data,e.treeData=e.convertData(a),e.treeData.forEach((function(e){e.name=e.label}));case 8:case"end":return t.stop()}}),t)})))()},loadNode:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,s["b"].getDepartNodeChild({parentId:e.eventKey});case 2:r=n.sent,a=r.data,e.dataRef.children=t.convertData(a,e.eventKey),t.userData=t.unique([].concat(Object(i["a"])(t.userData),Object(i["a"])(a.filter((function(e){return e.isuser}))))),t.treeData=Object(i["a"])(t.treeData);case 7:case"end":return n.stop()}}),n)})))()},getTagsData:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s["b"].getTags();case 2:n=t.sent,r=n.data,r.personal.forEach((function(e){e.label=e.tag_name,e.isuser=0})),e.tagsData=e.convertData(r.personal,null,"tab"),e.tagsData.forEach((function(e){e.name=e.label}));case 7:case"end":return t.stop()}}),t)})))()},loadTagNode:function(e,t){var n=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var a,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,s["b"].getTagsUser({id:e.eventKey});case 2:a=r.sent,c=a.data.data,c.userid_list.forEach((function(r){if(r.label=r.name,r.isuser=1,r.id=r.userid,t){var a=n.checkedList.userId.findIndex((function(e){return e==r.id}));e.checked?a<0&&n.filterData&&n.filterData.indexOf(r.id)<0&&n.checkedList.userId.push(r.id):n.checkedList.userId.splice(a,1)}})),e.dataRef.children=n.convertData(c.userid_list),n.userData=n.unique([].concat(Object(i["a"])(n.userData),Object(i["a"])(c.userid_list))),n.tagsData=Object(i["a"])(n.tagsData),t&&n.setCheckData();case 9:case"end":return r.stop()}}),r)})))()},checkChange:function(e,t){var n=this;2==this.tabKey&&this.loadTagNode(t.node,"parent");var r=t;t.node?r=t.node.dataRef.id:this.searchList.forEach((function(t){t.id==r?t.checked=e.target.checked:n.radio&&(t.checked=!1)}));var a=this.checkedList.userId.findIndex((function(e){return e==r}));a>-1?this.checkedList.userId.splice(a,1):(this.radio&&(this.checkedList.userId=[]),this.checkedList.userId.push(r)),this.checkUserId=this.checkedList.userId,this.setCheckData()},unique:function(e){var t={};return e=e.reduce((function(e,n){return!t[n.id]&&(t[n.id]=e.push(n)),e}),[]),e},setCheckData:function(){var e=this;this.checkedList.user=this.userData.filter((function(t){return e.checkedList.userId.indexOf(t.id)>-1})),this.checkedList.user.forEach((function(e){e.name=e.label}));var t=[];this.checkedList.user.forEach((function(e){t.push(e.dep)})),this.checkedList.dep=[].concat(t)},convertData:function(e,t,n){var r=this;return e.forEach((function(e){e.isuser?(e.isLeaf=!0,e.dep=t||e.dep_id,e.class="user-select",r.filterData&&r.filterData.indexOf(e.id)>-1&&(e.disabled=!0)):(e.checkable=!1,n?(e.scopedSlots={icon:"custom"},r.radio&&(e.selectable=!1)):e.selectable=!1)})),e},delChecked:function(e,t,n){var r=this.checkedList.userId.findIndex((function(e){return e==n.id}));this.$delete(this.checkedList.userId,r),this.checkUserId=this.checkedList.userId,this.setCheckData(),this.searchList.forEach((function(e){e.id==n.id&&(e.checked=!1)}))},btnSave:function(){this.$emit("done",this.checkedList),this._show=!1},inputChange:function(){""==this.keyword&&(this.searchShow=!1)},btnSearch:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Array.isArray(e.checkUserId)||(e.checkUserId=Object.assign([],e.checkUserId.checked)),t.next=3,s["b"].getUserSearch({keyword:e.keyword});case 3:n=t.sent,r=n.data,r.forEach((function(t){t.value=t.id,t.dep=t.parentid.split(",")[0],e.filterData&&e.filterData.indexOf(t.id)>-1&&(t.disabled=!0)})),e.searchList=r,e.searchList.forEach((function(t){e.checkUserId.indexOf(t.id)>-1&&(t.checked=!0)})),e.userData=e.unique([].concat(Object(i["a"])(e.userData),Object(i["a"])(r.filter((function(e){return e.isuser}))))),e.treeData=Object(i["a"])(e.treeData),e.searchShow=Boolean(e.keyword);case 11:case"end":return t.stop()}}),t)})))()},openInfo:function(e){if(this.isLook){var t=e.id?e.id:e.userid;Object(o["b"])(t)}}}},u=d,h=(n("dcb3"),n("2877")),l=Object(h["a"])(u,r,a,!1,null,"92e49e62",null);t["a"]=l.exports},b0c0:function(e,t,n){var r=n("83ab"),a=n("9bf2").f,i=Function.prototype,c=i.toString,s=/^\s*function ([^ (]*)/,o="name";r&&!(o in i)&&a(i,o,{configurable:!0,get:function(){try{return c.call(this).match(s)[1]}catch(e){return""}}})},c740:function(e,t,n){"use strict";var r=n("23e7"),a=n("b727").findIndex,i=n("44d2"),c=n("ae40"),s="findIndex",o=!0,d=c(s);s in[]&&Array(1)[s]((function(){o=!1})),r({target:"Array",proto:!0,forced:o||!d},{findIndex:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),i(s)},c975:function(e,t,n){"use strict";var r=n("23e7"),a=n("4d64").indexOf,i=n("a640"),c=n("ae40"),s=[].indexOf,o=!!s&&1/[1].indexOf(1,-0)<0,d=i("indexOf"),u=c("indexOf",{ACCESSORS:!0,1:0});r({target:"Array",proto:!0,forced:o||!d||!u},{indexOf:function(e){return o?s.apply(this,arguments)||0:a(this,e,arguments.length>1?arguments[1]:void 0)}})},dcb3:function(e,t,n){"use strict";var r=n("f748"),a=n.n(r);a.a},e96b:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return s}));n("c975"),n("ac1f"),n("466d");var r=n("f64c");function a(){var e=window.navigator.userAgent.toLowerCase();return"micromessenger"==e.match(/MicroMessenger/i)&&"wxwork"==e.match(/wxwork/i)}function i(e){var t=e.config,n=e.agent_config;a()&&wx.config({beta:!0,debug:!1,appId:t.corpid,timestamp:t.timestamp,nonceStr:t.noncestr,signature:t.signature,jsApiList:["onMenuShareAppMessage","onMenuShareTimeline","onMenuShareWechat","openUserProfile","openEnterpriseChat"]}),wx.ready((function(){wx.checkJsApi({jsApiList:["onMenuShareAppMessage","onMenuShareTimeline","onMenuShareWechat","openUserProfile","openEnterpriseChat"],success:function(e){console.log(e)}}),n&&wx.agentConfig({corpid:n.corpid,agentid:n.agent_id,timestamp:n.timestamp,nonceStr:n.noncestr,signature:n.signature,jsApiList:["openUserProfile","openEnterpriseChat"],success:function(e){console.log("agent",e)}})}))}function c(e){var t=e.group_member,n=e.group_name;a()&&wx.ready((function(){wx.openEnterpriseChat({userIds:t,externalUserIds:"",groupName:n,success:function(e){console.log(e)},fail:function(e){e.errMsg.indexOf("function not exist")>-1&&r["a"].error({maxCount:1,content:"版本过低请升级"})}})}))}function s(e){a()&&wx.ready((function(){var t=e;if(t){var n=t;wx.invoke("openUserProfile",{type:1,userid:n},(function(e){"openUserProfile:ok"!=e.err_msg&&r["a"].error({maxCount:1,content:"该成员不是当前企业成员"})}))}}))}},f748:function(e,t,n){},fb6a:function(e,t,n){"use strict";var r=n("23e7"),a=n("861d"),i=n("e8b5"),c=n("23cb"),s=n("50c4"),o=n("fc6a"),d=n("8418"),u=n("b622"),h=n("1dde"),l=n("ae40"),f=h("slice"),p=l("slice",{ACCESSORS:!0,0:0,1:2}),k=u("species"),g=[].slice,v=Math.max;r({target:"Array",proto:!0,forced:!f||!p},{slice:function(e,t){var n,r,u,h=o(this),l=s(h.length),f=c(e,l),p=c(void 0===t?l:t,l);if(i(h)&&(n=h.constructor,"function"!=typeof n||n!==Array&&!i(n.prototype)?a(n)&&(n=n[k],null===n&&(n=void 0)):n=void 0,n===Array||void 0===n))return g.call(h,f,p);for(r=new(void 0===n?Array:n)(v(p-f,0)),u=0;f<p;f++,u++)f in h&&d(r,u,h[f]);return r.length=u,r}})}}]);