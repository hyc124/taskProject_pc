(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-046007fe"],{"0660":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"report"},[s("div",{staticClass:"report-search"},[s("div",{staticClass:"task-search-title"},[s("span",{class:t.filterBoxShow?"":"black",on:{click:function(a){t.filterBoxShow=!t.filterBoxShow}}},[t._v(t._s(t.filterBoxShow?"收起":"展开")+"筛选 "),s("a-icon",{attrs:{type:t.filterBoxShow?"caret-up":"caret-down"}})],1)]),s("div",{staticClass:"split-box split-box-thin"}),s("div",{directives:[{name:"show",rawName:"v-show",value:t.filterBoxShow,expression:"filterBoxShow"}],staticClass:"search-box task-search"},[s("div",{staticClass:"search-content search-status"},[s("span",{staticClass:"label-span"},[t._v("报表类型")]),s("a-radio-group",{attrs:{name:"status"},model:{value:t.filterObj.type,callback:function(a){t.$set(t.filterObj,"type",a)},expression:"filterObj.type"}},[s("a-radio",{attrs:{value:1}},[t._v("周报表")]),s("a-radio",{attrs:{value:2}},[t._v("月报表")])],1)],1),s("div",{staticClass:"search-content search-level"},[s("span",{staticClass:"label-span"},[t._v("报表范围")]),s("a-radio-group",{attrs:{name:"level"},model:{value:t.filterObj.area,callback:function(a){t.$set(t.filterObj,"area",a)},expression:"filterObj.area"}},[s("a-radio",{attrs:{value:1}},[t._v("个人")]),parseInt(t.userInfo.type)>=1?s("a-radio",{attrs:{value:2}},[t._v("部门")]):t._e(),2===parseInt(t.userInfo.type)?s("a-radio",{attrs:{value:3}},[t._v("全员")]):t._e()],1)],1),s("div",{staticClass:"search-content search-level"},[s("span",{staticClass:"label-span"},[t._v("报表时间")]),s("a-month-picker",{attrs:{placeholder:"请选择时间",allowClear:!1},model:{value:t.filterObj.time,callback:function(a){t.$set(t.filterObj,"time",a)},expression:"filterObj.time"}}),s("a-select",{directives:[{name:"show",rawName:"v-show",value:1===t.filterObj.type,expression:"filterObj.type === 1"}],staticStyle:{"margin-left":"20px"},attrs:{placeholder:"请选择周"},model:{value:t.filterObj.week,callback:function(a){t.$set(t.filterObj,"week",a)},expression:"filterObj.week"}},t._l(t.weekArr,(function(a,e){return s("a-select-option",{key:e,attrs:{value:a.value}},[t._v(" "+t._s(a.label)+" ")])})),1)],1),s("a-button",{staticClass:"search-btn",attrs:{type:"primary"},on:{click:t.getData}},[t._v("搜索")])],1)]),s("div",{staticClass:"report-content"},[t.dataArr.length>0?s("ul",{staticClass:"report-ul"},t._l(t.dataArr,(function(a,e){return s("li",{key:e,staticClass:"report-li"},[s("span",{staticStyle:{display:"none"}},[t._v(t._s(a))]),s("div",{staticClass:"top"},[s("span",{staticClass:"time-title"},[t._v(t._s(a.titleTime))]),s("a-button",{attrs:{type:"link"},on:{click:function(e){return t.seeDeatail(a)}}},[t._v("查看详情")])],1),s("div",{staticClass:"bottom"},[s("div",{staticClass:"left"},[s("span",{directives:[{name:"show",rawName:"v-show",value:1==a.range,expression:"item.range == 1"}],staticClass:"tags person"},[t._v("个人")]),s("span",{directives:[{name:"show",rawName:"v-show",value:2==a.range,expression:"item.range == 2"}],staticClass:"tags dep"},[t._v("部门")]),s("span",{directives:[{name:"show",rawName:"v-show",value:3==a.range,expression:"item.range == 3"}],staticClass:"tags all"},[t._v("全员")])]),s("div",{staticClass:"right"},[s("p",{staticClass:"summary"},[t._v(t._s(a.summaryText))]),s("div",{staticClass:"count-list"},[s("p",[s("span",{staticClass:"title"},[t._v("相关任务总数")]),s("span",{staticClass:"num"},[t._v(t._s(a.total_count))])]),s("p",[s("span",{staticClass:"title"},[t._v("我发起的任务数")]),s("span",{staticClass:"num"},[t._v(t._s(a.total_count))])]),s("p",[s("span",{staticClass:"title"},[t._v("逾期任务数")]),s("span",{staticClass:"num"},[t._v(t._s(a.overdue_num))])]),s("p",[s("span",{staticClass:"title"},[t._v("逾期率")]),s("span",{staticClass:"num"},[t._v(t._s(a.overdue_rate)+"%")])])]),s("p",{staticClass:"encourage-words"},[t._v(t._s(a.excitation))])])])])})),0):s("div",{staticClass:"no-data"},[s("img",{staticClass:"no-data-img",attrs:{src:e("9485"),alt:"暂无数据"}})]),s("a-modal",{attrs:{title:t.dataObj.titleTime,visible:t.modalShow,centered:!0,destroyOnClose:!0},on:{ok:function(a){t.modalShow=!1},cancel:function(a){t.modalShow=!1}}},[s("div",{staticClass:"modal-content"},[s("p",{staticClass:"summary-text"},[t._v(t._s(t.dataObj.summaryText))]),s("div",{staticClass:"count-list"},[s("p",[s("span",{staticClass:"title"},[t._v("相关任务总数")]),s("span",{staticClass:"num"},[t._v(t._s(t.dataObj.total_count))])]),s("p",[s("span",{staticClass:"title"},[t._v("我发起的任务数")]),s("span",{staticClass:"num"},[t._v(t._s(t.dataObj.total_count))])]),s("p",[s("span",{staticClass:"title"},[t._v("逾期任务数")]),s("span",{staticClass:"num"},[t._v(t._s(t.dataObj.overdue_num))])]),s("p",[s("span",{staticClass:"title"},[t._v("逾期率")]),s("span",{staticClass:"num"},[t._v(t._s(t.dataObj.overdue_rate)+"%")])])]),s("p",{staticClass:"status"},[t._v(t._s(t.dataObj.overdue_num>0?"当前有"+t.dataObj.overdue_num+"个逾期任务":"当前没有逾期任务"))]),s("p",{staticClass:"status"},[t._v("本周任务按时完成率为"+t._s(t.dataObj.ontime_finish_rate>0?t.dataObj.ontime_finish_rate:0)+"%")])])])],1)])},i=[],r=(e("99af"),e("4160"),e("b0c0"),e("ac1f"),e("1276"),e("159b"),e("96cf"),e("1da1")),n=e("c1df"),l=e.n(n),o=e("365c"),c={name:"MonthlyReport",data:function(){return{filterBoxShow:!0,filterObj:{type:2,area:1,time:l()(new Date,"YYYY-MM"),week:1},dataArr:[],weekArr:[{value:1,label:"第1周"},{value:2,label:"第2周"},{value:3,label:"第3周"},{value:4,label:"第4周"},{value:5,label:"第5周"}],modalShow:!1,dataObj:{excitation:"加油加油",launch_count:"0",month:"01",ontime_finish_rate:0,overdue_num:"0",overdue_rate:0,range:"1",summaryText:"本月任务执行情况不是很理想，继续努力哦！",summary_type:2,theweek_end_count:"0",titleTime:"2020年01月第1周",total_count:"0",week:"1",year:"2020"},userInfo:{type:0}}},mounted:function(){var t=this,a=this.$route.query,e=a.year,s=a.month,i=a.week,r=a.rang;"null"!=e&&"null"!=s&&r&&(this.filterObj.type=parseInt(r),this.filterObj.time=l()("".concat(e,"-").concat(s)),this.filterObj.week=i?parseInt(i):4),this.getData(),window.addEventListener("setItem",(function(){t.userName=sessionStorage.getItem("watchStorage"),t.userInfo=JSON.parse(sessionStorage.getItem("userInfo"))}));var n=JSON.parse(sessionStorage.getItem("userInfo"));n&&n.name&&(this.userInfo=n)},methods:{getData:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var e,s,i,r,n,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e=t.filterObj.time?l()(t.filterObj.time).format("YYYY-MM"):"",s={type:t.filterObj.type,range:t.filterObj.area,year:e?e.split("-")[0]:"",month:e?e.split("-")[1]:""},1===t.filterObj.type&&(s.week=t.filterObj.week),a.next=5,o["c"].summary(s);case 5:i=a.sent,r=i.code,n=i.msg,c=i.data,r?(t.dataArr=[].concat(c),t.dataArr.length>0&&t.dataArr.forEach((function(t){t.titleTime=t.year+"年"+t.month+"月第"+t.week+"周",1===t.summary_type?t.summaryText="本周的任务执行情况非常优秀，再接再厉！":2===t.summary_type?t.summaryText="本周任务执行情况不是很理想，继续努力哦！":3===t.summary_type?t.summaryText="目前还没有相关任务，快来体验吧！":t.summaryText=""}))):t.$message.error(n,2);case 10:case"end":return a.stop()}}),a)})))()},seeDeatail:function(t){this.dataObj=t,this.modalShow=!0},modalSure:function(){}}},u=c,p=(e("1a30"),e("2877")),m=Object(p["a"])(u,s,i,!1,null,"401f9345",null);a["default"]=m.exports},"1a30":function(t,a,e){"use strict";var s=e("5dcb"),i=e.n(s);i.a},"5dcb":function(t,a,e){},9485:function(t,a,e){t.exports=e.p+"img/nodata.78203cc4.png"},b0c0:function(t,a,e){var s=e("83ab"),i=e("9bf2").f,r=Function.prototype,n=r.toString,l=/^\s*function ([^ (]*)/,o="name";s&&!(o in r)&&i(r,o,{configurable:!0,get:function(){try{return n.call(this).match(l)[1]}catch(t){return""}}})}}]);