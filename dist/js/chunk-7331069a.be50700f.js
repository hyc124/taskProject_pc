(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7331069a"],{5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,a){var s=a("1d80"),n=a("5899"),i="["+n+"]",r=RegExp("^"+i+i+"*"),l=RegExp(i+i+"*$"),o=function(t){return function(e){var a=String(s(e));return 1&t&&(a=a.replace(r,"")),2&t&&(a=a.replace(l,"")),a}};t.exports={start:o(1),end:o(2),trim:o(3)}},"6b56":function(t,e,a){"use strict";var s=a("7ad1"),n=a.n(s);n.a},7156:function(t,e,a){var s=a("861d"),n=a("d2bb");t.exports=function(t,e,a){var i,r;return n&&"function"==typeof(i=e.constructor)&&i!==a&&s(r=i.prototype)&&r!==a.prototype&&n(t,r),t}},"785a":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"task-search-title"},[a("span",{class:t.filterBoxShow?"":"black",on:{click:function(e){t.filterBoxShow=!t.filterBoxShow}}},[t._v(t._s(t.filterBoxShow?"收起":"展开")+"筛选 "),a("a-icon",{attrs:{type:t.filterBoxShow?"caret-up":"caret-down"}})],1)]),a("div",{staticClass:"split-box split-box-thin"}),a("div",{directives:[{name:"show",rawName:"v-show",value:t.filterBoxShow,expression:"filterBoxShow"}],staticClass:"search-box task-search"},[a("div",{directives:[{name:"show",rawName:"v-show",value:!t.rankTask&&!t.rankCount,expression:"(!rankTask && !rankCount)"}],staticClass:"search-content search-status"},[a("span",{staticClass:"label-span"},[t._v("人员范围")]),a("a-radio-group",{attrs:{name:"status"},model:{value:t.dataObj.statUser,callback:function(e){t.$set(t.dataObj,"statUser",e)},expression:"dataObj.statUser"}},[a("a-radio",{attrs:{value:1}},[t._v("我的")]),parseInt(t.userInfo.type)>0?a("a-radio",{attrs:{value:2}},[t._v("部门")]):t._e(),parseInt(t.userInfo.type)>1?a("a-radio",{attrs:{value:0}},[t._v("全部")]):t._e(),parseInt(t.userInfo.type)>0?a("a-radio",{attrs:{value:3}},[t._v("自定义用户")]):t._e()],1),a("a-button",{directives:[{name:"show",rawName:"v-show",value:3===t.dataObj.statUser,expression:"dataObj.statUser === 3"}],on:{click:function(e){t.startUserWindow=!0}}},[t._v("选择人员")]),a("span",{directives:[{name:"show",rawName:"v-show",value:3===t.dataObj.statUser,expression:"dataObj.statUser === 3"}],staticClass:"user-span"},[t._v("已选"+t._s(t.startUserList.length)+"人")])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.rankCount,expression:"rankCount"}],staticClass:"search-content search-status"},[a("span",{staticClass:"label-span"},[t._v("排行维度")]),a("a-radio-group",{attrs:{name:"status"},model:{value:t.dataObj.statUser,callback:function(e){t.$set(t.dataObj,"statUser",e)},expression:"dataObj.statUser"}},[a("a-radio",{attrs:{value:1}},[t._v("个人")]),a("a-radio",{attrs:{value:2}},[t._v("部门")]),parseInt(t.userInfo.type)>0?a("a-radio",{attrs:{value:3}},[t._v("自定义用户")]):t._e()],1),a("a-button",{directives:[{name:"show",rawName:"v-show",value:3===t.dataObj.statUser,expression:"dataObj.statUser === 3"}],on:{click:function(e){t.startUserWindow=!0}}},[t._v("选择人员")]),a("span",{directives:[{name:"show",rawName:"v-show",value:3===t.dataObj.statUser,expression:"dataObj.statUser === 3"}],staticClass:"user-span"},[t._v("已选"+t._s(t.startUserList.length)+"人")])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.rankCount&&!t.rankDetail&&!t.rankList,expression:"!rankCount && !rankDetail&&!rankList"}],staticClass:"search-content search-level"},[a("span",{staticClass:"label-span"},[t._v("任务角色")]),a("a-checkbox",{attrs:{checked:t.isRoleAll},on:{change:t.roleAllChange}},[t._v("全部")]),a("a-checkbox-group",{attrs:{name:"level"},on:{change:t.roleChange},model:{value:t.roleChecked,callback:function(e){t.roleChecked=e},expression:"roleChecked"}},[a("a-checkbox",{attrs:{value:1}},[t._v("发起")]),a("a-checkbox",{attrs:{value:2}},[t._v("接收")]),a("a-checkbox",{attrs:{value:3}},[t._v("抄送")])],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.rankCount&&!t.rankDetail&&!t.rankList,expression:"!rankCount && !rankDetail && !rankList"}],staticClass:"search-content search-level"},[a("span",{staticClass:"label-span"},[t._v("任务状态")]),a("a-checkbox",{attrs:{checked:t.isStatusAll},on:{change:t.statusAllChange}},[t._v("全部")]),a("a-checkbox-group",{attrs:{name:"level"},on:{change:t.statusChange},model:{value:t.statusChecked,callback:function(e){t.statusChecked=e},expression:"statusChecked"}},[a("a-checkbox",{attrs:{value:1}},[t._v("待开始")]),a("a-checkbox",{attrs:{value:2}},[t._v("执行中")]),a("a-checkbox",{attrs:{value:3}},[t._v("逾期已完成")]),a("a-checkbox",{attrs:{value:5}},[t._v("逾期未完成")]),a("a-checkbox",{attrs:{value:4}},[t._v("已完成")])],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.rankDetail,expression:"!rankDetail"}],staticClass:"search-content search-level"},[a("span",{staticClass:"label-span"},[t._v("任务级别")]),a("a-checkbox",{attrs:{checked:t.isLevelAll},on:{change:t.levelAllChange}},[t._v("全部")]),a("a-checkbox-group",{attrs:{name:"level"},on:{change:t.levelChange},model:{value:t.levelChecked,callback:function(e){t.levelChecked=e},expression:"levelChecked"}},[a("a-checkbox",{attrs:{value:0}},[t._v("普通")]),a("a-checkbox",{attrs:{value:1}},[t._v("紧急")]),a("a-checkbox",{attrs:{value:2}},[t._v("非常紧急")])],1)],1),a("div",{staticClass:"search-content search-time"},[a("span",{staticClass:"label-span"},[t._v("发起时间")]),a("a-radio-group",{attrs:{name:"type"},model:{value:t.dataObj.startTimeType,callback:function(e){t.$set(t.dataObj,"startTimeType",e)},expression:"dataObj.startTimeType"}},[a("a-radio",{attrs:{value:0}},[t._v("不限")]),a("a-radio",{attrs:{value:1}},[t._v("近一周")]),a("a-radio",{attrs:{value:2}},[t._v("近一个月")]),a("a-radio",{attrs:{value:3}},[t._v("自定义")])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:3===t.dataObj.startTimeType,expression:"dataObj.startTimeType === 3"}],staticStyle:{display:"inline-block"}},[a("a-date-picker",{attrs:{allowClear:!1,inputReadOnly:!0,format:"YYYY-MM-DD",placeholder:"开始时间"},on:{change:t.stratTimeChange},model:{value:t.dataObj.sStartTime,callback:function(e){t.$set(t.dataObj,"sStartTime",e)},expression:"dataObj.sStartTime"}}),t._v(" - "),a("a-date-picker",{attrs:{allowClear:!1,inputReadOnly:!0,"disabled-date":t.disabledEndDate,format:"YYYY-MM-DD",placeholder:"结束时间"},on:{change:t.endTimeChange},model:{value:t.dataObj.sEndTime,callback:function(e){t.$set(t.dataObj,"sEndTime",e)},expression:"dataObj.sEndTime"}})],1)],1),a("div",{staticClass:"search-content search-time"},[a("span",{staticClass:"label-span"},[t._v("结束时间")]),a("a-radio-group",{attrs:{name:"areaRecycle"},model:{value:t.dataObj.endTimeType,callback:function(e){t.$set(t.dataObj,"endTimeType",e)},expression:"dataObj.endTimeType"}},[a("a-radio",{attrs:{value:0}},[t._v("不限")]),a("a-radio",{attrs:{value:1}},[t._v("近一周")]),a("a-radio",{attrs:{value:2}},[t._v("近一个月")]),a("a-radio",{attrs:{value:3}},[t._v("自定义")])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:3===t.dataObj.endTimeType,expression:"dataObj.endTimeType === 3"}],staticStyle:{display:"inline-block"}},[a("a-date-picker",{attrs:{allowClear:!1,inputReadOnly:!0,format:"YYYY-MM-DD",placeholder:"开始时间"},on:{change:t.stratTimeChange2},model:{value:t.dataObj.eStartTime,callback:function(e){t.$set(t.dataObj,"eStartTime",e)},expression:"dataObj.eStartTime"}}),t._v(" - "),a("a-date-picker",{attrs:{allowClear:!1,inputReadOnly:!0,"disabled-date":t.disabledEndDate2,format:"YYYY-MM-DD",placeholder:"结束时间"},on:{change:t.endTimeChange2},model:{value:t.dataObj.eEndTime,callback:function(e){t.$set(t.dataObj,"eEndTime",e)},expression:"dataObj.eEndTime"}})],1),a("a-button",{staticClass:"filter-search-btn",attrs:{type:"primary"},on:{click:t.search}},[t._v("搜索")])],1)]),a("pick-user",{attrs:{show:t.startUserWindow,"selected-user":t.startUserList,"is-data":1},on:{"update:show":function(e){t.startUserWindow=e},done:t.getStartUser}})],1)},n=[],i=(a("99af"),a("4160"),a("a15b"),a("d81d"),a("b0c0"),a("a9e3"),a("ac1f"),a("1276"),a("159b"),a("adc3")),r={name:"filterComponents",components:{PickUser:i["a"]},props:{rankCount:{type:Boolean,default:!1},rankTask:{type:Boolean,default:!1},rankDetail:{type:Boolean,default:!1},rankList:{type:Boolean,default:!1},backObj:{type:Object}},data:function(){return{filterBoxShow:!0,dataObj:{statUser:1,strarUserId:"",taskRole:"1,2,3",taskLevel:"0,1,2",taskStatus:"1,2,3,4,5",startTimeType:0,sStartTime:null,sEndTime:null,endTimeType:0,eStartTime:null,eEndTime:null},isStatusAll:!0,isLevelAll:!0,isRoleAll:!0,roleChecked:[1,2,3],statusChecked:[1,2,3,4,5],levelChecked:[0,1,2],startUserWindow:!1,stratUserText:"",startUserList:[],userInfo:JSON.parse(sessionStorage.getItem("userInfo"))}},watch:{roleChecked:function(t){this.isRoleAll=3===t.length},statusChecked:function(t){this.isStatusAll=5===t.length},levelChecked:function(t){this.isLevelAll=3===t.length}},created:function(){this.backObj&&this.getPropsObj(this.backObj)},methods:{getPropsObj:function(t){if(t){console.log(t);var e=this.dataObj;if(e.statUser=t.statUser,e.strarUserId=t.strarUserId,e.taskLevel=-1===t.taskLevel?"0,1,2":t.taskLevel,e.taskStatus=t.taskStatus,e.startTimeType=t.startTimeType,e.sStartTime=t.sStartTime,e.sEndTime=t.sEndTime,e.endTimeType=t.endTimeType,e.eStartTime=t.eStartTime,e.eEndTime=t.eEndTime,this.roleChecked=t.taskRole?t.taskRole.split(",").map(Number):[1,2,3],this.statusChecked=t.taskStatus?t.taskStatus.split(",").map(Number):[1,2,3,4,5],this.levelChecked=t.taskLevel?t.taskLevel.split(",").map(Number):[2,3,4],e.strarUserId){var a=JSON.parse(sessionStorage.getItem("diyUser"));this.startUserList=[].concat(a)}}},getStartUser:function(t){if(t.userId&&t.userId.length>0&&(this.dataObj.strarUserId=t.userId.join(",")),t.user&&t.user.length>0){var e=[];this.startUserList=[].concat(t.user),t.user.forEach((function(t){e.push(t.name)})),this.stratUserText=e.join(",")}else this.stratUserText="",this.startUserList=[]},disabledEndDate:function(t){var e=this.dataObj.sStartTime;return!(!t||!e)&&e.valueOf()>=t.valueOf()},stratTimeChange:function(t){this.dataObj.sStartTime=t},endTimeChange:function(t){this.dataObj.sEndTime=t},disabledEndDate2:function(t){var e=this.dataObj.eStartTime;return!(!t||!e)&&e.valueOf()>=t.valueOf()},stratTimeChange2:function(t){this.dataObj.eStartTime=t},endTimeChange2:function(t){this.dataObj.eEndTime=t},statusAllChange:function(t){t.target.checked?(this.statusChecked=[1,2,3,4,5],this.isStatusAll=!0):(this.statusChecked=[],this.isStatusAll=!1)},statusChange:function(t){this.isStatusAll=4===t.length,this.taskStatus=t.length>0?t.join(","):0},levelAllChange:function(t){t.target.checked?(this.levelChecked=[0,1,2],this.isLevelAll=!0):(this.levelChecked=[],this.isLevelAll=!1)},levelChange:function(t){this.isLevelAll=3===t.length,this.taskLevel=t.length>0?t.join(","):-1},roleAllChange:function(t){t.target.checked?(this.roleChecked=[1,2,3],this.isRoleAll=!0):(this.roleChecked=[],this.isRoleAll=!1)},roleChange:function(t){this.isRoleAll=3===t.length,this.taskStatus=t.length>0?t.join(","):0},search:function(){3==this.dataObj.statUser&&0==this.startUserList.length?this.$message.error("发起人员自定义用户未选择人员"):3!=this.dataObj.startTimeType||null!=this.dataObj.sStartTime&&null!=this.dataObj.sEndTime?3!=this.dataObj.endTimeType||null!=this.dataObj.eStartTime&&null!=this.dataObj.eEndTime?(this.dataObj.taskRole=this.roleChecked.length>0?this.roleChecked.join(","):0,this.dataObj.taskLevel=this.levelChecked.length>0?this.levelChecked.join(","):-1,this.dataObj.taskStatus=this.statusChecked.length>0?this.statusChecked.join(","):0,this.$emit("done",this.dataObj),sessionStorage.setItem("diyUser",JSON.stringify(this.startUserList)),sessionStorage.setItem("staCountFilter",JSON.stringify(this.dataObj))):this.$message.error("结束时间自定义时间不能为空",2):this.$message.error("发起时间自定义时间不能为空",2)}}},l=r,o=(a("d5a9"),a("2877")),c=Object(o["a"])(l,s,n,!1,null,"229046e1",null);e["a"]=c.exports},"7ad1":function(t,e,a){},"896c":function(t,e,a){},9485:function(t,e,a){t.exports=a.p+"img/nodata.78203cc4.png"},a9e3:function(t,e,a){"use strict";var s=a("83ab"),n=a("da84"),i=a("94ca"),r=a("6eeb"),l=a("5135"),o=a("c6b6"),c=a("7156"),d=a("c04e"),u=a("d039"),h=a("7c73"),v=a("241c").f,p=a("06cf").f,m=a("9bf2").f,f=a("58a8").trim,k="Number",b=n[k],g=b.prototype,T=o(h(g))==k,C=function(t){var e,a,s,n,i,r,l,o,c=d(t,!1);if("string"==typeof c&&c.length>2)if(c=f(c),e=c.charCodeAt(0),43===e||45===e){if(a=c.charCodeAt(2),88===a||120===a)return NaN}else if(48===e){switch(c.charCodeAt(1)){case 66:case 98:s=2,n=49;break;case 79:case 111:s=8,n=55;break;default:return+c}for(i=c.slice(2),r=i.length,l=0;l<r;l++)if(o=i.charCodeAt(l),o<48||o>n)return NaN;return parseInt(i,s)}return+c};if(i(k,!b(" 0o1")||!b("0b1")||b("+0x1"))){for(var _,O=function(t){var e=arguments.length<1?0:t,a=this;return a instanceof O&&(T?u((function(){g.valueOf.call(a)})):o(a)!=k)?c(new b(C(e)),a,O):C(e)},x=s?v(b):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),j=0;x.length>j;j++)l(b,_=x[j])&&!l(O,_)&&m(O,_,p(b,_));O.prototype=g,g.constructor=O,r(n,k,O)}},d5a9:function(t,e,a){"use strict";var s=a("896c"),n=a.n(s);n.a},deff:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"task-list"},[s("header",{staticClass:"page-header"},[t._v("任务总数")]),s("div",{staticClass:"split-box"}),s("filter-module",{attrs:{"back-obj":t.filterData},on:{done:t.getFilterData}}),s("div",{staticClass:"split-box"}),s("div",{staticClass:"task-list"},[t.taskList.length>0?s("div",{staticClass:"task-content"},[s("a-table",{attrs:{rowKey:function(t){return t.task_id},"data-source":t.taskList,pagination:t.pagination,loading:t.loading},on:{change:t.handleTableChange},scopedSlots:t._u([{key:"action",fn:function(e,a){return[s("span",[s("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.seeDetail(a.user_name,a.userid)}}},[t._v("查看详情")])],1)]}}],null,!1,602489333)},[s("a-table-column",{attrs:{title:"排名","data-index":"orderNum"}}),s("a-table-column",{attrs:{title:"任务名称","data-index":"title",ellipsis:!0}}),s("a-table-column",{attrs:{title:"任务级别","data-index":"level"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(0==e?"普通":1==e?"紧急":"非常紧急")+" ")]}}],null,!1,2591013778)}),s("a-table-column",{attrs:{title:"任务状态","data-index":"status"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(0==e?"未发布":1==e?"执行中":2==e?"已完成":"取消")+" ")]}}],null,!1,1776458063)}),s("a-table-column",{attrs:{title:"任务进度","data-index":"task_progress"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e||0)+"% ")]}}],null,!1,639081064)}),s("a-table-column",{attrs:{title:"发起时间","data-index":"create_time"}}),s("a-table-column",{attrs:{title:"截至时间","data-index":"end_time"}}),s("a-table-column",{attrs:{title:"任务发起人","data-index":"name"}}),s("a-table-column",{attrs:{title:"发起部门","data-index":"dep_name"}}),s("a-table-column",{attrs:{title:"任务接收人数","data-index":"receive_user_count"}}),s("a-table-column",{key:"action",attrs:{title:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[s("a-button",{attrs:{type:"primary"},on:{click:function(a){return t.goDetail(e.task_id)}}},[t._v("查看详情")])],1)]}}],null,!1,3891896815)})],1)],1):s("div",{staticClass:"no-data"},[s("img",{staticClass:"no-data-img",attrs:{src:a("9485"),alt:"暂无数据"}})])])],1)},n=[],i=(a("99af"),a("4160"),a("159b"),a("5530")),r=(a("96cf"),a("1da1")),l=a("365c"),o=a("c1df"),c=a.n(o),d=a("785a"),u={name:"allTask",components:{filterModule:d["a"]},data:function(){return{headerText:"",filterBoxShow:!0,filterData:{statUser:1,strarUserId:"",taskRole:"1,2,3",taskLevel:"0,1,2",taskStatus:"1,2,3,4,5",startTimeType:0,sStartTime:null,sEndTime:null,endTimeType:0,eStartTime:null,eEndTime:null},taskList:[],loading:!1,pagination:{current:1,pageSize:10,total:1}}},created:function(){this.getData()},methods:{getData:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var s,n,i,r,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.loading=!0,t&&(e.pagination.current=1),s={people_type:e.filterData.statUser,people_userid:e.filterData.strarUserId,role_type:e.filterData.taskRole,status:e.filterData.taskStatus,level:e.filterData.taskLevel,launch_time:e.filterData.startTimeType,l_start_time:e.filterData.sStartTime?c()(e.filterData.sStartTime).format("YYYY-MM-DD"):null,l_end_time:e.filterData.sEndTime?c()(e.filterData.sEndTime).format("YYYY-MM-DD"):null,end_time:e.filterData.endTimeType,e_start_time:e.filterData.eStartTime?c()(e.filterData.eStartTime).format("YYYY-MM-DD"):null,e_end_time:e.filterData.eEndTime?c()(e.filterData.eEndTime).format("YYYY-MM-DD"):null,page:e.pagination.current,limit:e.pagination.pageSize},a.next=5,l["c"].allTask(s);case 5:n=a.sent,i=n.code,r=n.msg,o=n.data,1===i?(e.loading=!1,e.pagination.total=o.total,e.taskList=[].concat(o.data),e.taskList.length>0&&e.taskList.forEach((function(t,a){t.orderNum=(e.pagination.current-1)*e.pagination.pageSize+a+1,t.orderNum=t.orderNum<10?"0".concat(t.orderNum):t.orderNum}))):(e.loading=!0,e.$message.error(r,2));case 10:case"end":return a.stop()}}),a)})))()},handleTableChange:function(t,e,a){console.log(e);var s=Object(i["a"])({},this.pagination);s.current=t.current,this.pagination=s,"ascend"===a.order?this.sortType="asc":this.sortType="desc",this.getData()},getFilterData:function(t){this.filterData=t,this.getData(1)},goDetail:function(t){this.$router.push({path:"/taskDetail/taskDetail",query:{id:t,pageType:this.pageType,look:0}})}}},h=u,v=(a("6b56"),a("2877")),p=Object(v["a"])(h,s,n,!1,null,"3063f51e",null);e["default"]=p.exports}}]);